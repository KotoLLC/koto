syntax = "proto3";

package rpc;
option go_package = "../rpc";

import "model.proto";

service MessageService {
    rpc Messages (MessageMessagesRequest) returns (MessageMessagesResponse);
    rpc Post (MessagePostRequest) returns (MessagePostResponse);
    rpc Edit (MessageEditRequest) returns (MessageEditResponse);
    rpc Delete (MessageDeleteRequest) returns (Empty);
    rpc PostComment (MessagePostCommentRequest) returns (MessagePostCommentResponse);
    rpc EditComment (MessageEditCommentRequest) returns (MessageEditCommentResponse);
    rpc DeleteComment (MessageDeleteCommentRequest) returns (Empty);
}

message MessageMessagesRequest {
    string token = 1;
    string from = 2;
    string until = 3;
}

message MessageMessagesResponse {
    repeated Message messages = 1;
}

message MessagePostRequest {
    string token = 1;
    string text = 2;
}

message MessagePostResponse {
    Message message = 1;
}

message MessageEditRequest {
    string message_id = 1;
    string text = 2;
}

message MessageEditResponse {
    Message message = 1;
}

message MessageDeleteRequest {
    string message_id = 1;
}

message MessagePostCommentRequest {
    string token = 1;
    string message_id = 2;
    string text = 3;
}

message MessagePostCommentResponse {
    Comment comment = 1;
}

message MessageEditCommentRequest {
    string comment_id = 1;
    string text = 2;
}

message MessageEditCommentResponse {
    Comment comment = 1;
}

message MessageDeleteCommentRequest {
    string comment_id = 1;
}
