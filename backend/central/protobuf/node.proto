syntax = "proto3";

package rpc;
option go_package = "../rpc";

import "model.proto";

service NodeService {
    rpc Register (NodeRegisterRequest) returns (Empty);
    rpc Nodes (Empty) returns (NodeNodesResponse);
    rpc Approve (NodeApproveRequest) returns (Empty);
    rpc Remove (NodeRemoveRequest) returns (Empty);
    rpc SetPostLimit (NodePostLimitRequest) returns (Empty);
}

message NodeRegisterRequest {
    string address = 1;
    string details = 2;
    int32 post_limit = 3;
}

message NodeNodesResponseNode {
    string id = 1;
    string address = 2;
    User user = 3;
    string created_at = 4;
    string approved_at = 5;
    string disabled_at = 6;
    string details = 7;
    int32 post_limit = 8;
}

message NodeNodesResponse {
    repeated NodeNodesResponseNode nodes = 1;
}

message NodeApproveRequest {
    string node_id = 1;
}

message NodeRemoveRequest {
    string node_id = 1;
}

message NodePostLimitRequest {
    string node_id = 1;
    int32 post_limit = 2;
}
