syntax = "proto3";

package rpc;
option go_package = "../rpc";

import "model.proto";

service NodeService {
    rpc Register (NodeRegisterRequest) returns (Empty);
    rpc PostMessages (Empty) returns (NodePostMessagesResponse);
    rpc GetMessages (Empty) returns (NodeGetMessagesResponse);
}

message NodeRegisterRequest {
    string address = 1;
}

message NodePostMessagesResponse {
    repeated string nodes = 1;
}

message NodeGetMessagesNode {
    string address = 1;
    repeated string users = 2;
}

message NodeGetMessagesResponse {
    repeated NodeGetMessagesNode nodes = 1;
}
